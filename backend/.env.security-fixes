# Security Fixes Environment Configuration
# Add these variables to your .env file

# =============================================================================
# FIX_1: Supabase Auth Only Configuration
# =============================================================================
# Remove these JWT-related variables (no longer needed):
# JWT_SECRET=
# JWT_EXPIRES_IN=
# JWT_REFRESH_EXPIRES_IN=

# Ensure these Supabase variables are properly configured:
SUPABASE_URL=your-supabase-project-url
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# =============================================================================
# FIX_2: Secure Stripe Webhook Configuration
# =============================================================================

# Production Webhook Secret (from Stripe Dashboard)
STRIPE_WEBHOOK_SECRET=whsec_your_production_webhook_secret

# Development Webhook Secret (from Stripe CLI)
# Use this when running `stripe listen --forward-to localhost:5000/api/subscriptions/webhook`
STRIPE_CLI_WEBHOOK_SECRET=whsec_your_development_webhook_secret

# Stripe API Keys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

# =============================================================================
# Development Setup Instructions
# =============================================================================

# 1. For local development with Stripe CLI:
#    stripe login
#    stripe listen --forward-to localhost:5000/api/subscriptions/webhook
#    Copy the webhook signing secret and set STRIPE_CLI_WEBHOOK_SECRET

# 2. For production deployment:
#    Create webhook endpoint in Stripe Dashboard
#    Set endpoint URL to: https://yourdomain.com/api/subscriptions/webhook
#    Copy the webhook signing secret and set STRIPE_WEBHOOK_SECRET

# 3. Webhook Events to Enable:
#    - checkout.session.completed
#    - customer.subscription.updated
#    - customer.subscription.deleted
#    - invoice.payment_succeeded
#    - payment_intent.succeeded

# =============================================================================
# Security Notes
# =============================================================================

# - Never commit real secrets to version control
# - Use different webhook secrets for development and production
# - Rotate webhook secrets regularly
# - Monitor webhook delivery in Stripe Dashboard
# - Set up proper logging and alerting for webhook failures